<?php
/**
 * @file The main plugin for iMoneza
 * 
 * It is necessary to have some of these hooks in the `module-name.module` file otherwise Drupal won't find them.
 * 
 * @author Aaron Saray
 */

/** load in my own composer stuff for this moment */
require_once 'vendor/autoload.php';

/**
 * Implements hook_menu()
 *
 * This generates an iMoneza menu item at the main level.
 *
 * @return array
 */
function imoneza_menu() {
  $iMoneza = \iMoneza\Drupal\App::getInstance();
  return $iMoneza->menu();
}

/**
 * Implements hook_permission()
 *
 * This creates a section in the permissions admin area to allow permissions for this module.
 * @return array
 */
function imoneza_permission() {
  $iMoneza = \iMoneza\Drupal\App::getInstance();
  return $iMoneza->permissions();
}

/**
 * Implements hook_theme()
 *
 * @return array
 */
function imoneza_theme() {
  $iMoneza = \iMoneza\Drupal\App::getInstance();
  return $iMoneza->theme();
}

/**
 * Implements hook_help()
 * 
 * Displays help string for this module 
 * 
 * @param $path string
 * @param $arg mixed
 * @return null|string
 */
function imoneza_help($path, $arg) {
  $iMoneza = \iMoneza\Drupal\App::getInstance();
  return $iMoneza->help($path, $arg);
}

/**
 * Implements hook_forms()
 * 
 * Handles forms by the app
 * 
 * @param $formId
 * @param $args
 * @return array
 */
function imoneza_forms($formId, $args) {
  if (stripos($formId, 'imoneza_') === 0) {
    $iMoneza = \iMoneza\Drupal\App::getInstance();
    return [
        $formId =>  [
            'callback'  =>  array($iMoneza, 'form'),
            'callback arguments'  =>  array($formId)
        ]
    ];
  }
}
